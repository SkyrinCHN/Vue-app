{"remainingRequest":"/Users/liuhai/Desktop/project/Vue-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuhai/Desktop/project/Vue-app/src/components/goods/Cart.vue?vue&type=style&index=0&id=0e2fc574&scoped=true&lang=css","dependencies":[{"path":"/Users/liuhai/Desktop/project/Vue-app/src/components/goods/Cart.vue","mtime":1549877712398},{"path":"/Users/liuhai/Desktop/project/Vue-app/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/liuhai/Desktop/project/Vue-app/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1521907988000},{"path":"/Users/liuhai/Desktop/project/Vue-app/node_modules/postcss-loader/lib/index.js","mtime":499162500000},{"path":"/Users/liuhai/Desktop/project/Vue-app/node_modules/cache-loader/dist/cjs.js","mtime":1534853416000},{"path":"/Users/liuhai/Desktop/project/Vue-app/node_modules/vue-loader/lib/index.js","mtime":1527860006000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.go-pay{\n  width: 150px;\n}\nspan{\n  margin-left: 20px;\n}\n",{"version":3,"sources":["Cart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4HA;AACA;AACA;AACA;AACA;AACA","file":"Cart.vue","sourceRoot":"src/components/goods","sourcesContent":["<template>\n   <div class=\"app-cart\">\n\t\t\t<div class=\"mui-card\">\n\t\t\t\t<div class=\"mui-card-header\">\n           <h3>购物车列表</h3>\n        </div>\n\t\t\t\t<div class=\"mui-card-content\">\n\t\t\t\t\t<div class=\"mui-card-content-inner\">\n  <ul class=\"mui-table-view\">\n\t\t\t\t<li class=\"mui-table-view-cell mui-media\" v-for=\"item in list\" :key=\"item.id\">\n\t\t\t\t\t<a href=\"javascript:;\">\n\t\t\t\t\t\t<img class=\"mui-media-object mui-pull-left\" src=\"\">\n\t\t\t\t\t\t<div class=\"mui-media-body\">\n\t\t\t\t\t\t\t  {{item.name}}\n\t\t\t\t\t\t\t<p class='mui-ellipsis'>\n                 {{item.price}}\n\t\t\t\t\t\t\t</p>\n               \t<div class=\"mui-numbox\">\n\t\t\t\t\t<button class=\"mui-btn mui-btn-numbox-minus\" type=\"button\" @click=\"cartSub\" :data-id=\"item.id\">-</button>\n\t\t\t\t\t<input class=\"mui-input-numbox\" type=\"number\" :value=\"item.count\"/>\n\t\t\t\t\t<button class=\"mui-btn mui-btn-numbox-plus\" type=\"button\"\n          @click=\"cartAdd\" :data-id=\"item.id\">+</button>\n\t\t\t\t</div>\n        </div>\n       </p>\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n         </ul>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"mui-card-footer\">\n          <span>\n             小计:{{getSubTotal}} \n          </span>\n          <button class=\"go-pay\">轻松购</button>\n        </div>\n        </div>\n   </div>  \n</template>\n<script>\nimport { MessageBox } from 'mint-ui';\n  export default {\n    created() {\n      this.getList();\n    },\n    data(){\n      return {\n        list:[]\n      }\n    },\n    methods:{\n      updateItemCount(id,count){\n        //同步购物车中数量\n        //id    购物车id\n        //count 商品数量\n        var url = \"http://127.0.0.1:3000/updateCart?id=\"+id+\"&count=\"+count;\n        this.axios.get(url).then(result=>{\n            console.log(result);\n        });\n      },\n      cartSub(e){\n        var id = e.target.dataset.id;\n        for(var item of this.list){\n           if(item.id == id ){\n             item.count--;\n             if(item.count <1){\n               MessageBox({\n                 title:'温馨提示',\n                 message:'再减商品就删除了',\n                 showCancelButton: true,\n                 confirmButtonText:'删了',\n                  cancelButtonText:'我再想想',\n               }).then(res=>{\n                 if(res=='confirm'){\n                   var url = \"http://127.0.0.1:3000/DeleteProduct?id=\"+item.id;\n                   this.axios.get(url).then(res=>{console.log(res.data)});\n                   this.getList();\n                   return;\n                 }\n               })\n             }\n             //同步数据\n             this.updateItemCount(item.id,item.count);\n             break;\n           }\n        }\n      },\n      cartAdd(e){\n        //1:获取当前按钮绑定购物车id\n        var id = e.target.dataset.id\n        //2:创建循环购物车数组内容\n        for(var item of this.list){\n        //3:判断当前元素id是否与元素id\n          if(item.id == id){\n            //4:修改数据\n            item.count++;\n            //同步数据到数据库\n            this.updateItemCount(item.id,item.count)\n            break;\n          }\n        }\n      },\n      getList(){\n        var url = \"http://127.0.0.1:3000/\";\n        url +=\"getCartList\";\n        this.axios.get(url).then(result=>{\n          this.list = result.data.data;\n          console.log(result.data.data);\n        })\n      },\n\n    },\n    computed:{\n      getSubTotal:function(){\n        var sum = 0 ; \n        for(var item of this.list){\n          sum += item.price*item.count;\n        }\n        return sum;\n      }\n    }\n  }  \n</script>\n<style scoped>\n  .go-pay{\n    width: 150px;\n  }\n  span{\n    margin-left: 20px;\n  }\n</style>\n"]}]}